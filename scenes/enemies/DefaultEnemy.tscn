[gd_scene load_steps=32 format=3 uid="uid://djj2jwexpvc0p"]

[ext_resource type="PackedScene" uid="uid://btw78yl2xtnas" path="res://models/enemies/DefaultEnemy/default_enemy.glb" id="1"]
[ext_resource type="Script" path="res://src/Core/Enemies/DefaultEnemy.cs" id="2"]
[ext_resource type="Script" path="res://src/Core/Audio/SfxOptions.cs" id="3"]
[ext_resource type="Material" path="res://models/enemies/DefaultEnemy/top.material" id="3_puq3j"]
[ext_resource type="FontFile" path="res://assets/fonts/secondary/secondary_bold_outline.tres" id="4"]
[ext_resource type="Material" path="res://models/enemies/DefaultEnemy/bottom.material" id="4_rcfv2"]
[ext_resource type="Resource" path="res://resources/default_enemy_screams_streams.tres" id="5"]
[ext_resource type="Material" path="res://models/enemies/DefaultEnemy/body.material" id="5_sqwen"]
[ext_resource type="Material" path="res://models/enemies/DefaultEnemy/mask.material" id="6_g5at3"]
[ext_resource type="Material" path="res://models/enemies/DefaultEnemy/maskdetails.material" id="7_iwqo4"]

[sub_resource type="SphereShape3D" id="16"]
radius = 14.7219

[sub_resource type="CapsuleShape3D" id="1"]
radius = 2.62381
height = 11.657

[sub_resource type="AnimationNodeAnimation" id="2"]
animation = &"mutant_long_attack"

[sub_resource type="AnimationNodeAnimation" id="3"]
animation = &"mutant_look_around"

[sub_resource type="AnimationNodeAnimation" id="4"]
animation = &"idle_react"

[sub_resource type="AnimationNodeAnimation" id="5"]
animation = &"biting_neck"

[sub_resource type="AnimationNodeAnimation" id="6"]
animation = &"bittingloop"

[sub_resource type="AnimationNodeOneShot" id="7"]

[sub_resource type="AnimationNodeOneShot" id="8"]

[sub_resource type="AnimationNodeOneShot" id="9"]

[sub_resource type="AnimationNodeOneShot" id="10"]

[sub_resource type="AnimationNodeBlend2" id="11"]

[sub_resource type="AnimationNodeAnimation" id="12"]
animation = &"crawlingloop"

[sub_resource type="AnimationNodeAnimation" id="13"]
animation = &"mutant_walkloop"

[sub_resource type="AnimationNodeBlendSpace1D" id="14"]
blend_point_0/node = SubResource("12")
blend_point_0/pos = 1.0
blend_point_1/node = SubResource("13")
blend_point_1/pos = -1.0

[sub_resource type="AnimationNodeTimeScale" id="17"]

[sub_resource type="AnimationNodeBlendTree" id="15"]
graph_offset = Vector2(-469.302, 36.8561)
nodes/Animation/node = SubResource("6")
nodes/Animation/position = Vector2(-560, 60)
"nodes/Animation 2/node" = SubResource("2")
"nodes/Animation 2/position" = Vector2(480, 300)
"nodes/Animation 3/node" = SubResource("3")
"nodes/Animation 3/position" = Vector2(-20, 300)
"nodes/Animation 4/node" = SubResource("4")
"nodes/Animation 4/position" = Vector2(280, 300)
"nodes/Animation 5/node" = SubResource("5")
"nodes/Animation 5/position" = Vector2(780, 300)
nodes/bitting_neck/node = SubResource("7")
nodes/bitting_neck/position = Vector2(780, 140)
nodes/idle_react/node = SubResource("8")
nodes/idle_react/position = Vector2(280, 140)
nodes/long_attack/node = SubResource("9")
nodes/long_attack/position = Vector2(540, 140)
nodes/look_around/node = SubResource("10")
nodes/look_around/position = Vector2(40, 140)
nodes/motion/node = SubResource("11")
nodes/motion/position = Vector2(-320, 120)
nodes/output/position = Vector2(980, 20)
nodes/space_motion/node = SubResource("14")
nodes/space_motion/position = Vector2(-600, 300)
nodes/time_scale_motion/node = SubResource("17")
nodes/time_scale_motion/position = Vector2(-600, 200)
node_connections = [&"output", 0, &"bitting_neck", &"bitting_neck", 0, &"long_attack", &"bitting_neck", 1, &"Animation 5", &"idle_react", 0, &"look_around", &"idle_react", 1, &"Animation 4", &"long_attack", 0, &"idle_react", &"long_attack", 1, &"Animation 2", &"look_around", 0, &"motion", &"look_around", 1, &"Animation 3", &"motion", 0, &"Animation", &"motion", 1, &"time_scale_motion", &"time_scale_motion", 0, &"space_motion"]

[sub_resource type="ConvexPolygonShape3D" id="18"]
points = PackedVector3Array(36, 10, 36, -36, 10, 36, 0, 2, 0, 36, -5, 36, -36, -5, 36, 0, 0, 0)

[sub_resource type="ConvexPolygonShape3D" id="19"]
points = PackedVector3Array(80, 10, 80, -80, 10, 80, 0, 2, 0, 80, -5, 80, -80, -5, 80, 0, 0, 0)

[sub_resource type="StandardMaterial3D" id="21"]
transparency = 1
no_depth_test = true
shading_mode = 0
disable_ambient_light = true
disable_receive_shadows = true
billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="QuadMesh" id="20"]
size = Vector2(4, 2)

[node name="DefaultEnemy" type="CharacterBody3D"]
collision_mask = 12
script = ExtResource("2")
aimRayPath = NodePath("RayCastsOrigin/AimRay")
topRayPath = NodePath("RayCastsOrigin/Top")
bottomRayPath = NodePath("RayCastsOrigin/Bottom")
rightRayPath = NodePath("RayCastsOrigin/Right")
leftRayPath = NodePath("RayCastsOrigin/Left")
forwardRayPath = NodePath("RayCastsOrigin/Forward")
backwardRayPath = NodePath("RayCastsOrigin/Backward")
patrolSpeed = 10.0
chasingSpeed = 12.0
huntingSpeed = 14.0
animationTreePath = NodePath("AnimationTree")
sfxPath = NodePath("Sfx")
navigationAgentPath = NodePath("NavigationAgent3D")
closeSightPath = NodePath("CloseSight")
farSightPath = NodePath("FarSight")
headPath = NodePath("default_enemy/Armature/Skeleton3D/Head/HeadSensor")
playerMask = 1032
viewportDebugPath = NodePath("Debug/SubViewport")
labelDebugPath = NodePath("Debug/SubViewport/Label")
meshDebugPath = NodePath("Debug")
rangeToAttack = 8.0
timeAttack = 1.85
attackDamage = 0.1

[node name="default_enemy" parent="." instance=ExtResource("1")]
transform = Transform3D(-0.5, 0, -4.37114e-08, 0, 0.5, 0, 4.37114e-08, 0, -0.5, 0, 0, 0)

[node name="Skeleton3D" parent="default_enemy/Armature" index="0"]
bones/0/position = Vector3(-3.10797, -1.52144, -44.0975)
bones/0/rotation = Quaternion(-0.0579892, 0.00653498, 0.388768, 0.919486)
bones/1/rotation = Quaternion(0.126424, -0.020489, 0.0290461, 0.991339)
bones/2/rotation = Quaternion(0.0935038, -0.015261, 0.00831911, 0.995467)
bones/3/rotation = Quaternion(0.0939212, -0.0139691, 0.00714369, 0.995456)
bones/4/position = Vector3(5.00679e-06, 16.7736, -3.64648e-08)
bones/4/rotation = Quaternion(0.104529, 0.00862546, -0.0306673, 0.994011)
bones/5/rotation = Quaternion(-0.167613, -0.0830147, 0.0276378, 0.981963)
bones/6/position = Vector3(3.33786e-06, 24.3061, 12.8008)
bones/7/position = Vector3(8.08028, 14.6528, -0.596544)
bones/7/rotation = Quaternion(-0.447032, -0.528682, 0.609966, -0.385486)
bones/8/position = Vector3(1.76659e-06, 16.939, -3.59026e-06)
bones/8/rotation = Quaternion(-0.116354, -0.384628, 0.204171, 0.892658)
bones/9/rotation = Quaternion(-0.00968768, -0.170366, 0.914939, 0.365743)
bones/10/position = Vector3(-7.10933e-06, 36.429, 3.07929e-06)
bones/10/rotation = Quaternion(0.170254, -0.0301506, -0.22378, 0.95918)
bones/11/rotation = Quaternion(0.392979, 0.0620924, 0.385206, 0.832664)
bones/12/position = Vector3(-0.347112, 4.38919, 1.23015e-05)
bones/12/rotation = Quaternion(0.0610549, 0.178103, -0.49851, 0.846191)
bones/13/position = Vector3(0.380821, 4.32736, 8.16095e-06)
bones/13/rotation = Quaternion(0.160994, 0.560281, -0.417724, 0.696903)
bones/14/position = Vector3(-0.0337023, 3.7039, -2.31415e-05)
bones/15/rotation = Quaternion(-0.13322, -0.0336634, 0.00787789, 0.990483)
bones/16/position = Vector3(-0.00427157, 3.94223, 1.32787e-05)
bones/16/rotation = Quaternion(0.740559, -0.0111654, -0.0794104, 0.66719)
bones/17/position = Vector3(0.00652689, 3.66638, 4.6628e-07)
bones/17/rotation = Quaternion(0.345315, -0.00597135, -0.0383877, 0.937683)
bones/19/position = Vector3(-1.35539, 11.8203, -0.396464)
bones/19/rotation = Quaternion(0.0205244, -0.0839339, -0.0498984, 0.99501)
bones/20/position = Vector3(0.00826597, 3.99186, -1.63113e-05)
bones/20/rotation = Quaternion(0.672712, -0.0343286, -0.0781379, 0.734966)
bones/21/position = Vector3(0.00232315, 3.7227, -3.71011e-06)
bones/21/rotation = Quaternion(0.368113, -0.0143241, -0.0452388, 0.928569)
bones/22/position = Vector3(-0.0105858, 3.23544, 1.87159e-05)
bones/23/position = Vector3(1.39386, 12.0822, -0.243435)
bones/23/rotation = Quaternion(0.333116, -0.00566003, -0.255277, 0.907654)
bones/24/position = Vector3(-0.0104961, 3.64698, 2.65408e-06)
bones/24/rotation = Quaternion(0.388297, -0.0149628, -0.0395051, 0.920566)
bones/25/position = Vector3(0.000986099, 3.27273, -2.8167e-06)
bones/25/rotation = Quaternion(0.286965, -0.0158108, -0.0246668, 0.957493)
bones/26/position = Vector3(0.00951099, 2.93705, -1.07288e-05)
bones/27/position = Vector3(4.01549, 10.6944, 0.0867046)
bones/27/rotation = Quaternion(0.785892, -0.131272, -0.331143, 0.505455)
bones/28/position = Vector3(-0.00518513, 3.75879, 1.36396e-05)
bones/28/rotation = Quaternion(0.137908, 0.00178664, -0.0156141, 0.99032)
bones/29/position = Vector3(0.00747013, 2.94816, -1.21714e-05)
bones/29/rotation = Quaternion(0.352553, -0.0145574, -0.0430809, 0.934686)
bones/30/position = Vector3(-0.00227261, 2.74469, -5.72205e-06)
bones/31/rotation = Quaternion(0.614548, -0.435698, 0.535337, 0.381986)
bones/32/position = Vector3(-3.23298e-06, 16.939, 9.73103e-07)
bones/32/rotation = Quaternion(0.252698, 0.312361, -0.416874, 0.815347)
bones/33/rotation = Quaternion(0.104261, -0.147195, -0.872395, 0.454303)
bones/34/rotation = Quaternion(-0.133819, -0.0401064, -0.000841301, 0.990193)
bones/35/position = Vector3(3.69013, 4.21536, 1.4671)
bones/35/rotation = Quaternion(0.378748, -0.0511215, -0.380057, 0.842314)
bones/36/position = Vector3(0.331935, 4.62111, -3.28757e-06)
bones/36/rotation = Quaternion(-0.123759, -0.199276, 0.142035, 0.961664)
bones/37/rotation = Quaternion(-0.0862271, -0.489319, 0.396169, 0.772128)
bones/38/position = Vector3(0.0302906, 3.75892, -2.60472e-05)
bones/39/position = Vector3(4.17479, 11.5517, 0.0923199)
bones/39/rotation = Quaternion(-0.0740522, 0.0760456, -0.00416391, 0.994342)
bones/40/rotation = Quaternion(0.627977, 0.00963562, 0.063477, 0.775579)
bones/41/position = Vector3(-0.011658, 3.53298, 1.82637e-05)
bones/41/rotation = Quaternion(0.348307, 0.00508012, 0.0384449, 0.936578)
bones/43/position = Vector3(1.18173, 11.811, -0.209851)
bones/43/rotation = Quaternion(0.133825, 0.0545472, 0.0427316, 0.98858)
bones/44/position = Vector3(-0.000611894, 4.11127, 2.61779e-05)
bones/44/rotation = Quaternion(0.650534, 0.0309656, 0.0652573, 0.756034)
bones/45/rotation = Quaternion(0.41838, 0.0148868, 0.0424007, 0.90716)
bones/46/position = Vector3(0.00120863, 3.39525, -1.73673e-05)
bones/47/position = Vector3(-1.3627, 12.1622, 0.0885683)
bones/47/rotation = Quaternion(0.363097, -0.0126091, 0.129128, 0.922674)
bones/48/position = Vector3(0.0282509, 3.72166, -1.2612e-05)
bones/48/rotation = Quaternion(0.493469, 0.0163043, 0.0386687, 0.86875)
bones/49/rotation = Quaternion(0.33649, 0.0157867, 0.024475, 0.941237)
bones/51/rotation = Quaternion(0.690376, 0.0800851, 0.21441, 0.686292)
bones/52/rotation = Quaternion(0.213433, -0.000726354, 0.021932, 0.976711)
bones/53/position = Vector3(0.0110097, 3.11874, -8.42857e-06)
bones/53/rotation = Quaternion(0.303616, 0.0107103, 0.0220974, 0.952478)
bones/55/rotation = Quaternion(0.425681, 0.619219, 0.62675, -0.206271)
bones/56/rotation = Quaternion(-0.844962, -0.102182, 0.0796819, 0.518892)
bones/57/rotation = Quaternion(0.739421, -0.0374608, -0.0661322, 0.668939)
bones/58/position = Vector3(1.7314e-06, 21.7864, -1.0911e-05)
bones/58/rotation = Quaternion(0.405201, -0.138378, -0.0382876, 0.902883)
bones/59/position = Vector3(-4.73857e-06, 8.55933, -3.94881e-06)
bones/60/rotation = Quaternion(-0.0699662, 0.735561, 0.602468, 0.301806)
bones/61/rotation = Quaternion(-0.716939, 0.295764, -0.390571, 0.495959)
bones/62/rotation = Quaternion(0.675148, -0.0501442, -0.0972841, 0.729518)
bones/63/rotation = Quaternion(0.269651, 0.0480927, -0.0341373, 0.96115)

[node name="Enemie_1" parent="default_enemy/Armature/Skeleton3D" index="0"]
layers = 65
surface_material_override/0 = ExtResource("3_puq3j")
surface_material_override/1 = ExtResource("4_rcfv2")
surface_material_override/2 = ExtResource("5_sqwen")
surface_material_override/3 = ExtResource("6_g5at3")
surface_material_override/4 = ExtResource("7_iwqo4")

[node name="Head" type="BoneAttachment3D" parent="default_enemy/Armature/Skeleton3D" index="1"]
transform = Transform3D(0.699878, -0.69438, 0.167353, 0.693971, 0.605613, -0.389406, 0.169045, 0.388674, 0.905735, -61.8056, 46.3812, 6.33536)
bone_name = "mixamorig_HeadTop_End"
bone_idx = 6

[node name="HeadSensor" type="Area3D" parent="default_enemy/Armature/Skeleton3D/Head"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="default_enemy/Armature/Skeleton3D/Head/HeadSensor"]
transform = Transform3D(1, 1.49012e-08, 1.49012e-08, 2.98023e-08, 1, 5.96046e-08, -7.07805e-08, 2.38419e-07, 1, 0.273796, -7.9536, -11.584)
shape = SubResource("16")

[node name="LeftHand" type="BoneAttachment3D" parent="default_enemy/Armature/Skeleton3D" index="2"]
transform = Transform3D(0.48876, -0.393071, 0.778852, 0.685418, -0.379306, -0.621554, 0.539737, 0.837629, 0.0840279, -42.2741, 58.4786, -16.9118)
bone_name = "mixamorig_LeftHand"
bone_idx = 10

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(-0.5, 0, 4.37114e-08, 0, 0.5, 0, -4.37114e-08, 0, -0.5, 0, 3.01574, 0)
shape = SubResource("1")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("15")
anim_player = NodePath("../default_enemy/AnimationPlayer")
active = true
parameters/bitting_neck/active = false
parameters/bitting_neck/request = 0
parameters/idle_react/active = false
parameters/idle_react/request = 0
parameters/long_attack/active = false
parameters/long_attack/request = 0
parameters/look_around/active = false
parameters/look_around/request = 0
parameters/motion/blend_amount = 0.0
parameters/space_motion/blend_position = 1.0
parameters/time_scale_motion/scale = 1.0

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]

[node name="Sfx" type="Node3D" parent="."]
script = ExtResource("3")
streamsCategory = {
"screams": ExtResource("5")
}

[node name="RayCastsOrigin" type="Marker3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 3.26443, 0)

[node name="Bottom" type="RayCast3D" parent="RayCastsOrigin"]
target_position = Vector3(0, -15, 0)
collision_mask = 8
debug_shape_custom_color = Color(1, 0, 0, 1)
debug_shape_thickness = 5

[node name="Top" type="RayCast3D" parent="RayCastsOrigin"]
target_position = Vector3(0, 150, 0)
collision_mask = 12
debug_shape_custom_color = Color(0.921569, 0, 1, 1)
debug_shape_thickness = 5

[node name="Right" type="RayCast3D" parent="RayCastsOrigin"]
target_position = Vector3(-150, 0, 0)
collision_mask = 12
debug_shape_custom_color = Color(0.992157, 1, 0.027451, 1)
debug_shape_thickness = 5

[node name="Left" type="RayCast3D" parent="RayCastsOrigin"]
target_position = Vector3(150, -1, 0)
collision_mask = 12
debug_shape_custom_color = Color(0, 0.0156863, 1, 1)

[node name="Forward" type="RayCast3D" parent="RayCastsOrigin"]
target_position = Vector3(0, 0, 150)
collision_mask = 12
debug_shape_custom_color = Color(0.0431373, 1, 0.12549, 1)

[node name="Backward" type="RayCast3D" parent="RayCastsOrigin"]
target_position = Vector3(0, 0, -150)
collision_mask = 12
debug_shape_custom_color = Color(0, 0.952941, 1, 1)

[node name="AimRay" type="RayCast3D" parent="RayCastsOrigin"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1.64841)
target_position = Vector3(0, 0, 7)
collision_mask = 12
debug_shape_custom_color = Color(0.905882, 0, 0, 1)
debug_shape_thickness = 5

[node name="CloseSight" type="Area3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 3.35271, 0)
collision_mask = 1024

[node name="CollisionPolygon3D" type="CollisionShape3D" parent="CloseSight"]
shape = SubResource("18")

[node name="FarSight" type="Area3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 3.35271, 0)
collision_mask = 1024

[node name="CollisionPolygon3D" type="CollisionShape3D" parent="FarSight"]
shape = SubResource("19")

[node name="Debug" type="MeshInstance3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 10.8536, 0)
material_override = SubResource("21")
mesh = SubResource("20")

[node name="SubViewport" type="SubViewport" parent="Debug"]
transparent_bg = true
size = Vector2i(300, 100)

[node name="Label" type="Label" parent="Debug/SubViewport"]
offset_right = 40.0
offset_bottom = 14.0
size_flags_horizontal = 4
theme_override_fonts/font = ExtResource("4")
text = "STATE"

[editable path="default_enemy"]
